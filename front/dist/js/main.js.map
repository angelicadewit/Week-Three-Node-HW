{"version":3,"sources":["main.js"],"names":["console","log","showMessagesOnDOM","messages","messageUL","document","querySelector","messagesOnDOM","innerHTML","forEach","message","newMessage","createElement","user","time","text","delButton","textContent","addEventListener","e","axios","delete","index","indexOf","then","response","push","appendChild","messagesOnLoad","get","data","sendMessage","field","username","value","post","moment","Date","getTime","format","catch","error","key"],"mappings":";;AAAAA,QAAQC,GAAR;;AAIA;AACA;AACA;AACA;;;AAKA,IAAIC,oBAAoB,SAApBA,iBAAoB,CAASC,QAAT,EAAkB;AACtC;AACA,QAAIC,YAAYC,SAASC,aAAT,eAAhB;AACA,QAAIC,gBAAgB,EAApB;;AAEAH,cAAUI,SAAV;;AAEA;AACA;AACA;;AAEAL,aAASM,OAAT,CAAiB,UAASC,OAAT,EAAkB;AAC/B,YAAIC,aAAaN,SAASO,aAAT,MAAjB;;AAEAD,mBAAWH,SAAX,GAA0BE,QAAQG,IAAlC,UAA2CH,QAAQI,IAAnD,WAA6DJ,QAAQK,IAArE;;AAEA,YAAIC,YAAYX,SAASO,aAAT,UAAhB;AACAI,kBAAUC,WAAV;AACAD,kBAAUE,gBAAV,CAA2B,OAA3B,EAAoC,UAASC,CAAT,EAAY;AAC5CC,kBAAMC,MAAN,kCAA8C;AAC1CC,uBAAOnB,SAASoB,OAAT,CAAiBb,OAAjB;AADmC,aAA9C,EAGCc,IAHD,CAGM,UAASC,QAAT,EAAmB;AACrBzB,wBAAQC,GAAR,CAAYE,SAASoB,OAAT,CAAiBb,OAAjB,CAAZ;AACAV,wBAAQC,GAAR,qBAAgCwB,QAAhC;AACA;AACH,aAPD;AAQH,SATD;;AAWAlB,sBAAcmB,IAAd,CAAmBhB,OAAnB;AACAV,gBAAQC,GAAR,CAAYM,aAAZ;;AAEAI,mBAAWgB,WAAX,CAAuBX,SAAvB;AACAZ,kBAAUuB,WAAV,CAAsBhB,UAAtB;AAEH,KAxBD;AAyBH,CApCD;;AAsCA,IAAIiB,iBAAiB,SAAjBA,cAAiB,GAAU;AAC3BR,UAAMS,GAAN,kCACCL,IADD,CACM,UAASC,QAAT,EAAkB;AACxBvB,0BAAkBuB,SAASK,IAA3B;AACC,KAHD;AAIH,CALD;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,cAAc,SAAdA,WAAc,GAAU;AACxB,QAAIC,QAAQ3B,SAASC,aAAT,+BAAZ;AACA,QAAI2B,WAAW5B,SAASC,aAAT,4BAAf;;AAEA,uBAAkB;AACdN,gBAAQC,GAAR,oBAA+B+B,MAAME,KAArC;AACAd,cAAMe,IAAN,kCAA2C;AACvCtB,kBAAMoB,SAASC,KADwB;AAEvCnB,kBAAMiB,MAAME,KAF2B;AAGvCpB,kBAAMsB,OAAO,IAAIC,IAAJ,GAAWC,OAAX,EAAP,EAA6BC,MAA7B;AAHiC,SAA3C,EAKCf,IALD,CAKM,UAASC,QAAT,EAAmB;AACrBO,kBAAME,KAAN;AACAlC,oBAAQC,GAAR,qBAAgCwB,QAAhC;AAEH,SATD,EAUCe,KAVD,CAUO,UAASC,KAAT,EAAgB;AACnBzC,oBAAQC,GAAR;AACH,SAZD;AAaH;AACJ,CApBD;;AAuBA2B;AACAvB,SAASC,aAAT,gBAAsCY,gBAAtC,UAAgEa,WAAhE;AACA1B,SAASC,aAAT,gCAAoDY,gBAApD,aAAiF,UAAUC,CAAV,EAAa;AAC1F,QAAIA,EAAEuB,GAAF,YAAJ,EAAuB;AACrBX;AACD;AACJ,CAJD","file":"main.js","sourcesContent":["console.log(`Hello World from app.js! \nChange this message, and make sure it changes in the browser \nto verify that you're working in the right files.`)\n\n//user types, presses send, messages appears\n//user types, presses send, send message to server, message appears\n//user types, presses send, get message from field, send message to server, message appears\n//user types, presses send, get message from field, send message to server, [get message list from server, message appears]\n\n\n\n\nlet showMessagesOnDOM = function(messages){\n    // console.log(`here are your messages`, messages)\n    let messageUL = document.querySelector(`ul.messages`)\n    let messagesOnDOM = []\n\n    messageUL.innerHTML = ``\n\n    // while (messagesUL.children.length){\n    //     messagesUL.removeChild(messagesUL.children[0])\n    // }\n\n    messages.forEach(function(message) {\n        let newMessage = document.createElement(`li`)\n\n        newMessage.innerHTML = `${message.user} [${message.time}]: ${message.text} `\n\n        let delButton = document.createElement(`button`)\n        delButton.textContent = `delete`\n        delButton.addEventListener(\"click\", function(e) {\n            axios.delete(`http://localhost:1337/message`, {\n                index: messages.indexOf(message)\n            })\n            .then(function(response) {\n                console.log(messages.indexOf(message))\n                console.log(`server responded`, response)\n                // removeAMessage(response)\n            })\n        })\n\n        messagesOnDOM.push(message)\n        console.log(messagesOnDOM)\n\n        newMessage.appendChild(delButton)\n        messageUL.appendChild(newMessage)\n\n    })\n}\n\nlet messagesOnLoad = function(){\n    axios.get(`http://localhost:1337/message`)\n    .then(function(response){\n    showMessagesOnDOM(response.data)\n    })\n}\n\n// setInterval(function() {\n//     axios.get(`http://localhost:1337/message`)\n//         .then(function(response){\n//         showMessagesOnDOM(response.data)\n//         console.log(`hell`)\n//     })\n// }, 500); \n\nlet sendMessage = function(){\n    let field = document.querySelector(`input[name=\"new-message\"]`)\n    let username = document.querySelector(`input[name=\"username\"]`)\n\n    if (`field.value`){\n        console.log(`send to server:`, field.value)\n        axios.post(`http://localhost:1337/message`,{\n            user: username.value,\n            text: field.value,\n            time: moment(new Date().getTime()).format(`M-DD [at] h:mm:ss a`),\n        })\n        .then(function(response) {\n            field.value = ``\n            console.log(`server responded`, response)\n\n        })\n        .catch(function(error) {\n            console.log(`no message sent`)\n        })\n    }\n}\n\n\nmessagesOnLoad()\ndocument.querySelector(`button.send`).addEventListener(`click`, sendMessage)\ndocument.querySelector(`input[name=\"new-message\"]`).addEventListener(`keypress`, function (e) {\n    if (e.key === `Enter`) {\n      sendMessage()\n    }\n});"]}