{"version":3,"sources":["main.js"],"names":["console","log","showMessagesOnDOM","messages","messageUL","document","querySelector","innerHTML","forEach","message","newMessage","createElement","user","time","text","delButton","textContent","addEventListener","e","axios","delete","then","response","removeAMessage","appendChild","messagesOnLoad","get","data","sendMessage","field","username","value","post","moment","Date","getTime","format","catch","error","key"],"mappings":";;AAAAA,QAAQC,GAAR;;AAIA;AACA;AACA;AACA;;;AAKA,IAAIC,oBAAoB,SAApBA,iBAAoB,CAASC,QAAT,EAAkB;AACtC;AACA,QAAIC,YAAYC,SAASC,aAAT,eAAhB;;AAEAF,cAAUG,SAAV;;AAEA;AACA;AACA;;AAEAJ,aAASK,OAAT,CAAiB,UAASC,OAAT,EAAkB;AAC/B,YAAIC,aAAaL,SAASM,aAAT,MAAjB;;AAEAD,mBAAWH,SAAX,GAA0BE,QAAQG,IAAlC,UAA2CH,QAAQI,IAAnD,WAA6DJ,QAAQK,IAArE;;AAEA,YAAIC,YAAYV,SAASM,aAAT,UAAhB;AACAI,kBAAUC,WAAV;AACAD,kBAAUE,gBAAV,CAA2B,OAA3B,EAAoC,UAASC,CAAT,EAAY;AAC5CC,kBAAMC,MAAN,mCACCC,IADD,CACM,UAASC,QAAT,EAAmB;AACrBC;AACH,aAHD;AAIH,SALD;;AAOAb,mBAAWc,WAAX,CAAuBT,SAAvB;AACAX,kBAAUoB,WAAV,CAAsBd,UAAtB;AACH,KAhBD;AAiBH,CA3BD;;AA6BA,IAAIe,iBAAiB,SAAjBA,cAAiB,GAAU;AAC3BN,UAAMO,GAAN,kCACCL,IADD,CACM,UAASC,QAAT,EAAkB;AACxBpB,0BAAkBoB,SAASK,IAA3B;AACC,KAHD;AAIH,CALD;;AAOA,IAAIJ,iBAAiB,SAAjBA,cAAiB,GAAU;AAC3BvB,YAAQC,GAAR,CAAYE,QAAZ;AACH,CAFD;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIyB,cAAc,SAAdA,WAAc,GAAU;AACxB,QAAIC,QAAQxB,SAASC,aAAT,+BAAZ;AACA,QAAIwB,WAAWzB,SAASC,aAAT,4BAAf;;AAEA,uBAAkB;AACdN,gBAAQC,GAAR,oBAA+B4B,MAAME,KAArC;AACAZ,cAAMa,IAAN,kCAA2C;AACvCpB,kBAAMkB,SAASC,KADwB;AAEvCjB,kBAAMe,MAAME,KAF2B;AAGvClB,kBAAMoB,OAAO,IAAIC,IAAJ,GAAWC,OAAX,EAAP,EAA6BC,MAA7B;AAHiC,SAA3C,EAKCf,IALD,CAKM,UAASC,QAAT,EAAmB;AACrBO,kBAAME,KAAN;AACA/B,oBAAQC,GAAR,qBAAgCqB,QAAhC;AAEH,SATD,EAUCe,KAVD,CAUO,UAASC,KAAT,EAAgB;AACnBtC,oBAAQC,GAAR;AACH,SAZD;AAaH;AACJ,CApBD;;AAuBAwB;AACApB,SAASC,aAAT,gBAAsCW,gBAAtC,UAAgEW,WAAhE;AACAvB,SAASC,aAAT,gCAAoDW,gBAApD,aAAiF,UAAUC,CAAV,EAAa;AAC1F,QAAIA,EAAEqB,GAAF,YAAJ,EAAuB;AACrBX;AACD;AACJ,CAJD","file":"main.js","sourcesContent":["console.log(`Hello World from app.js! \nChange this message, and make sure it changes in the browser \nto verify that you're working in the right files.`)\n\n//user types, presses send, messages appears\n//user types, presses send, send message to server, message appears\n//user types, presses send, get message from field, send message to server, message appears\n//user types, presses send, get message from field, send message to server, [get message list from server, message appears]\n\n\n\n\nlet showMessagesOnDOM = function(messages){\n    // console.log(`here are your messages`, messages)\n    let messageUL = document.querySelector(`ul.messages`)\n\n    messageUL.innerHTML = ``\n\n    // while (messagesUL.children.length){\n    //     messagesUL.removeChild(messagesUL.children[0])\n    // }\n\n    messages.forEach(function(message) {\n        let newMessage = document.createElement(`li`)\n\n        newMessage.innerHTML = `${message.user} [${message.time}]: ${message.text} `\n\n        let delButton = document.createElement(`button`)\n        delButton.textContent = `delete`\n        delButton.addEventListener(\"click\", function(e) {\n            axios.delete(`http://localhost:1337/message/`)\n            .then(function(response) {\n                removeAMessage()\n            })\n        })\n\n        newMessage.appendChild(delButton)\n        messageUL.appendChild(newMessage)\n    })\n}\n\nlet messagesOnLoad = function(){\n    axios.get(`http://localhost:1337/message`)\n    .then(function(response){\n    showMessagesOnDOM(response.data)\n    })\n}\n\nlet removeAMessage = function(){\n    console.log(messages)\n}\n\n\n// setInterval(function() {\n//     axios.get(`http://localhost:1337/message`)\n//         .then(function(response){\n//         showMessagesOnDOM(response.data)\n//         console.log(`hell`)\n//     })\n// }, 500); \n\nlet sendMessage = function(){\n    let field = document.querySelector(`input[name=\"new-message\"]`)\n    let username = document.querySelector(`input[name=\"username\"]`)\n\n    if (`field.value`){\n        console.log(`send to server:`, field.value)\n        axios.post(`http://localhost:1337/message`,{\n            user: username.value,\n            text: field.value,\n            time: moment(new Date().getTime()).format(`M-DD [at] h:mm:ss a`),\n        })\n        .then(function(response) {\n            field.value = ``\n            console.log(`server responded`, response)\n\n        })\n        .catch(function(error) {\n            console.log(`no message sent`)\n        })\n    }\n}\n\n\nmessagesOnLoad()\ndocument.querySelector(`button.send`).addEventListener(`click`, sendMessage)\ndocument.querySelector(`input[name=\"new-message\"]`).addEventListener(`keypress`, function (e) {\n    if (e.key === `Enter`) {\n      sendMessage()\n    }\n});"]}